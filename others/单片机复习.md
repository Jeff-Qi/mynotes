## 一

## 二
1. 单片机引脚
2. 单片机cpu时序
3. 最简系统
4. p3引脚第二功能
5. 三类总线
6. 内部单元结构（ram 128字节）

## 三
1. 存储空间划分
2. 前128三区域
3. 寄存器区域选择
4. 堆栈指针（）

## 四
1. TMOD的每一位与功能
  - TMOD的长度为1个字节（8位），高4位和低4位分别控制T1和T0
    - GATE位=0时，Timer的启动/关闭由软件控制；GATE位=1由硬件控制
    - c/t：计时器0；定时器：1
    - m1/m0：工作模式
2. timer工作方式，记数初始值
  - Timer寄存器里保存的是计数值，当Timer启动后每过一个机器周期（定时模式）或输入一个外部事件脉冲（计数模式），计数值会自动增加1，通过计数值来确定时间和事件脉冲
3. 初始化步骤
  - 设置TMOD，确定T0与T1工作模式
  - 计算并装入初值（THx+TLx）
  - 根据需要设置中断（IE、IP）
  - 启动计数器（对TCON编程）

## 五
1. 中断的概念
  - CPU在运行处理某一事件A时，发生了另一事件B，请求CPU迅速转去处理（中断发生）；CPU暂时中断当前的工作，转去处理事件B（中断响应和中断服务）；待CPU将事件B处理完毕后，再回到原来事件A被中断的代码处继续执行处理事件A（中断返回）

2. 中断技术的优点
  - 中断的设计使单片机可以“专心地”执行主程序，不用主动去查询其他的东西；而只是等待事件随机产生中断后再去处理。可以使单片机的CPU被解放出来，获得更高的执行效率
  - 分时操作。CPU可以分时为多个I/O设备服务，提高了计算机的利用率
  - 实时响应。CPU能够及时处理应用系统的随机事件（顺序编程难以处理），系统的实时性大大增强（以硬件为代价）
  - 可靠性高。CPU具有处理设备故障及掉电等突发性事件的能力，从而使系统可靠性提高


3. 中断源
  - 引起CPU中断的根源

4. 中断系统
  - INT0即P3.2引脚上出现有效的中断信号时，中断标志IE0（TCON.1）置1，向CPU申请中断
  - INT1即P3.3引脚上出现有效的中断信号时，中断标志IE1（TCON.3）置1，向CPU申请中断
  - T0发生溢出时，置位TF0，并向CPU申请中断
  - T1发生溢出时，置位TF1，并向CPU申请中断
  - RI/TI当串行口接收完一帧串行数据时置位RI或当串行口发送完一帧串行数据时置位TI，向CPU申请中断

5. TCON每一位与功能
  - IT0、IT1：外部中断0、外部中断1的触发控制位
  - IE0、IE1：外部中断0、1的中断请求标志位
  - TR0、TR1：定时器T0、T1启停位
  - TF0、TF1：定时器T0、T1的溢出中断标志位

6. 串行口控制寄存器（SCON）
   - RI（SCON.0）：接收中断标志位；1为有数据
   - TI（SCON.1）：发送中断标志位：1为有发送数据请求
   - **TI/RI必须由软件（编程指令）清除**

7. 中断响应处理的过程
  1. 立即暂停当前正在执行的任何指令，并把下一条将要执行指令的地址压入堆栈中
  2. 根据中断的类型在中断向量表中找到对应的地址
  3. 到该地址上开始执行中断服务子程序，直到遇到指令“RETI”，中断服务子程序结束
  4. 执行完中断服务子程序后，从堆栈中弹出在中断产生时保存的将要执行的下一条指令的地址到程序计数器PC中，单片机开始从PC指示的地址继续执行程序

8. 中断允许寄存器（IE）
 - EA：中断使能，总控制位
 - 五类中断控制使能

9. 中断控制
  - 只有EA=1时，中断才会开放，此时IE中的其它位将使能或屏蔽某一个中断
如果EA=0，所有中断都不会被响应（全被屏蔽）
  - EA=1时，相应的中断由IE中相应的位来控制
    - 控制位置1使能中断
    - 控制位清0则屏蔽中断

10. 中断优先级控制寄存器（IE）
   - 外部中断0 > 定时/计数器0 > 外部中断1 > 定时/计数器1 > 串行口
   - 复位时，中断优先级控制寄存器IP=XXX0 0000B

11. 中断响应条件
  - 有中断源发出中断请求
  - 中断总控允许位EA=1，即CPU开中断
  - 申请中断的中断源的中断允许位为1，即没有被屏蔽

## 六
1. 串行通信的优点
  - 传输线少，长距离传送时成本低，且可以利用电话网等现成的设备，但数据的传送控制比并行通信复杂

2. 错误校验
  - 奇偶校验：数据尾随一位奇偶校验位判断1的个数位奇数还是偶数
  - 代码和校验：代码和校验是发送方将所发数据块求和（或各字节异或），产生一个字节的校验字符（校验和）附加到数据块末尾；接收方求和检验
  - 循环冗余校验：通过某种数学运算实现有效信息与校验位之间的循环校验

3. 波特率的定义
  - 传输数据中每秒信号的变化量。通常把波特与位/秒看成相等

4. SCON寄存器每一位与功能
  - SM0和SM1：为工作方式选择位，可选择四种工作方式
  - SM2：多机通信控制位，一般用于使能或屏蔽多个单片机之间通信的功能
  - REN位：接收使能位；REN=1时，单片机可以从串行口接收数据。如果REN=0，则接收功能被禁止
5. 串行口工作方式
  1. 扩展移位寄存器方式；用于扩展并行输入或输出口；SM2位应设为0；TB8位无用；波特率固定为fosc/12；**数据由RXD（P3.0/10管脚）引脚输入或输出，同步移位脉冲由TXD（P3.1/11管脚）引脚输出**
  2. 方式1是10位数据的异步通信口：**TXD为数据发送引脚，RXD为数据接收引脚**
  3. 串行口工作方式2或方式3时为11位数据的异步通信口：模式3的波特率可控方式，波特率由定时器T1的溢出率决定；**TXD为数据发送引脚，RXD为数据接收引脚**

6. 波特率的计算
  - 方式0的波特率 = fosc/12
	- 方式2的波特率 =（2SMOD/64）· fosc ；𝑋=256−(2^𝑆𝑀𝑂𝐷×𝑓_𝑂𝑆𝐶)/(384×波特率)
	- 方式1或3的波特率 =（2SMOD/32）·（T1溢出率）


## 七
1. 汇编与高级语言的优缺点
  - 汇编：优点是产生的目标代码短，占用的存储空间小，执行速度快，能充分发挥单片机的硬件功能。缺点是对于复杂的应用来讲使用汇编语言编程复杂，程序的可读性和可移植性不强
  - 高级：缺点是产生的目标代码长，占用的存储空间大，执行速度慢。优点是相对于汇编语言来讲的，其实C语言在大多数情况下的机器代码生成效率和汇编语言相当，但可读性和可移植性却远远超过汇编语言，编程效率也大大高于汇编语言

2. C51扩展关键字

3. C51特殊数据类型
  - 位变量
  - 可位寻址的对象
  - 特殊功能寄存器

4. 位变量的禁忌
  1. 禁止中断的函数（#pragma disable）和显式定义寄存器组的函数( using  n )不能返回位变量
  2. 不能声明位类型指针
  3. 不能声明位类型的数组

5. sbit、bit与位域的区别
  - sbit：可位寻址的变量（在bdata中声明的变量）或可位寻址的特殊功能寄存器中的位的声明
  - bit：可位寻址区中的位（直接声明），共128位
  - 位域：将字节，整型，长整型的某几个位作为一个数据存储单元，进行独立访问

6. C51指针
  - 某个变量所占用存储单元的首地址。用来存放指针值的变量称为指针变量
    - 通用指针：不用指出指向数据的存储器类型
    - 具体指针：声明时就指定了所指向的存储器类型的指针，是指向特定存储区域的指针变量

7. C51中断函数
  - 函数类型    函数名(形式参数列表)     interrupt    n
    ```
    函数名（）interrupt n using m
         {
    	    函数内部实现 …
         }

    ```

  - 使用规则：
    1.  中断函数不能进行参数传递
    2.  中断函数没有返回值
    3.  不能在其它函数中直接调用中断函数
    4.  如果在中断中调用了其他函数，必须保证这些函数和中断函数使用了相同的寄存器组，并且这些函数应为可重入函数
    5.  C51编译器从绝对地址8n+3产生一个中断向量，其中n为中断号。该向量包含一个到中断函数入口地址的绝对跳转

8. 串行通信编程举例

## 八
1. 汇编寻址方式
  1.  立即寻址:与立即数相关的寻址方式，立即数的特征就是**在数据前加一个“#”号**:
  ```
  MOV  A, #100;
  ```
  2.  直接寻址：直接地址的内容载入一个寄存器中或寄存器的内容载入直接地址中，**地址前是没有“#”号**:
  ```
  MOV A,30H;
  ```
  3.  寄存器寻址：与工作寄存器R0~R7有关的寻址指令：
  ```
  ADD  A, R5;
  ```
  4.  间接寻址：用R0、R1、SP、DPTR中的某一寄存器来代替直接寻址中的直接地址来寻址；**“@”符号表示间接寻址，注意在书写时不要遗漏**：
  ```
  MOV R1,#32H;
  MOV A,@R1;
  ```
  5.  变址寻址：针对的仅是程序存储器，而且这种寻址方式只能从程序存储器中读数据；使用**程序计数器PC或数据指针DPTR作为间接地址**，有时还加上累加器A，根据这些间接地址在程序存储器找到相应的内容：
  ```
  MOVC  A, @A+DPTR;
  ```
  6.  寄存器特征寻址:与特定寄存器有关的寻址方式
  ```
  INC   A;
  ```
2. 非法指令
3. 数据传输指令
4. 控制转移类指令
