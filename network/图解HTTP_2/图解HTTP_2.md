---
title: HTTP报文简介
date: 2019-08-11 0:15：00
categories: Network
---
<!-- TOC START min:1 max:3 link:true asterisk:false update:true -->
- [HTTP报文内的HTTP信息](#http报文内的http信息)
  - [HTTP报文](#http报文)
  - [HTTP报文结构](#http报文结构)
  - [编码提升传输速率](#编码提升传输速率)
  - [分割发送的分块传输编码](#分割发送的分块传输编码)
  - [发送多种数据的多部分对象集合](#发送多种数据的多部分对象集合)
  - [获取部分内容的范围请求](#获取部分内容的范围请求)
  - [内容协商返回最合适内容](#内容协商返回最合适内容)
<!-- TOC END -->
<!--more-->

# HTTP报文内的HTTP信息

- HTTP通信过程：从客户端发往服务端的请求以及从服务器端返回客服端的响应

## HTTP报文

1. 分类：
  - 请求报文：客服端向服务端
  - 响应报文：服务端向客服端

## HTTP报文结构

1. 报文首部
  - 请求行或状态行
  - 首部字段
    - 请求首部、响应首部、通用首部、实体首部、（可能还有Cookie等）
2. 空行（CR + LF）
3. 报文主体（不一定存在）

## 编码提升传输速率

- 传输过程中通过编码提升传输速率，可能消耗更多CPU资源
- 报文主体和实体主体的差异
  1. 报文：HTTP 通信中的基本单位
  2. 实体：请求或响应的有效载荷，由实体首部和实体主体构成
- 压缩传输的内容编码
  1. 内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码

## 分割发送的分块传输编码

- 通过将数据分割成多块进行传输，让浏览器逐步显示页面

## 发送多种数据的多部分对象集合

1. 解释：一次发送可以有不同的数据类型
2. 对部分对象集合包含的对象：
  - multipart/form-data（表单）
  - multipart/byteranges（响应报文包含多个范围）
3. 使用多部分对象集合时，需要在首部字段里加上Content-type
  - boundary 字符串来划分多部分对象集合指明的各类实体
  - 起始和结尾都加入“--”标记开始和结尾
  - **多部分对象集合的每个部分类型中，都可以含有首部字段**
  - **可以在某个部分中嵌套使用多部分对象集合**

## 获取部分内容的范围请求

- 指定范围发送的请求叫做范围请求
- 执行范围请求时，会用到首部字段Range 来指定资源的byte范围

## 内容协商返回最合适内容
- 内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源
- 三种类型
  1. 服务端驱动协商
  2. 客户端启动协商
  3. 透明协商
